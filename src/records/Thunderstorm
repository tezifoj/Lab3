package records;

import java.util.Arrays;

public record Thunderstorm(String[] componentNames) {

    public void rage() {
        if (componentNames == null || componentNames.length == 0) {
            throw new IllegalStateException("Гроза не может бушевать без компонентов!");
        }

        for (int i = componentNames.length - 1; i > 0; i--) {
            int j = (int) (Math.random() * (i + 1));
            String temp = componentNames[i];
            componentNames[i] = componentNames[j];
            componentNames[j] = temp;
        }

        StringBuilder gale = new StringBuilder("Разразилась гроза с ");

        for (int i = 0; i < componentNames.length; i++) {
            if (i > 0) {
                if (i == componentNames.length - 1) {
                    gale.append(" и ");
                } else {
                    gale.append(", ");
                }
            }
            gale.append(componentNames[i]);
        }

        System.out.println(gale);
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (!(obj instanceof Thunderstorm(String[] names))) return false;
        return Arrays.equals(componentNames, names);
    }

    @Override
    public int hashCode() {
        return Arrays.hashCode(componentNames);
    }

    @Override
    public String toString() {
        return "Thunderstorm{componentNames=" + Arrays.toString(componentNames) + "}";
    }
}
